{% extends "recruiter/base.html" %}
{% block title %}AMP Tech | Candidates {%endblock title %}
{% block content %}
{% load static %}
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/select/1.3.0/js/dataTables.select.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.0/css/select.dataTables.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
<style>
  .cursor-pointer {cursor: pointer;}
  .app {
    display: flex;
    height: 300px;
    width: 300px;
  }

  /* styles for candidate row colors */
  .tr-APPLIED{
    background-color: white;
  }
  .tr-ACCEPTED{
    background-color: white;
  }
  .tr-REJECTED{
    background-color: white;
  }

  .font-small{
      font-size: 12px;
  }
/* 
  tbody tr:hover{
      background-color: rgb(242, 242, 255)
  } */

  .cand_name:hover{
      text-decoration: underline;
  }
  .rating {
	direction: rtl;
	unicode-bidi: bidi-override;
	color: #ddd; /* Personal choice */
}
.rating input {
	display: none;
}
.rating label:hover,
.rating label:hover ~ label,
.rating input:checked + label,
.rating input:checked + label ~ label {
	color: #ffc107; /* Personal color choice. Lifted from Bootstrap 4 */
}


</style>
                {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                    <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
<!-- Icon Cards-->
<div class="row d-none">
    <div class="col-xl-4 col-sm-6 mb-4">
        <div class="card text-white pjob o-hidden h-100">
            <div class="card-body">
                <div class="card-body-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h2>Applications</h2>
                <div class="mr-5">{{applied}}</div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-sm-6 mb-4">
        <div class="card text-white pjob o-hidden h-100">
            <div class="card-body">
                <div class="card-body-icon">
                    <i class="fas fa-frown"></i>
                </div>
                <h2>Rejected</h2>
                <div class="mr-5">{{rejected}}</div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-sm-6 mb-4">
        <div class="card text-white pjob o-hidden h-100">
            <div class="card-body">
                <div class="card-body-icon">
                    <i class="far fa-thumbs-up"></i>
                </div>
                <h2>Accepted</h2>
                <div class="mr-5">{{recruited}}</div>
            </div>
        </div>
    </div>


</div>


<!-- Extra large modal -->


<!-- DataTables Example -->
<div class="card mb-3">
    <div class="card-header d-none">
        <i class="fas fa-table"></i>
        Applications
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <!--<div class="row">
              <div class="col-xl-12 col-sm-6 mb-2">
                <div class="float-right">
                  Post : <input style="border: 1px solid #ced4da;border-radius: 0.2rem;" type="text" id="post" name="post">
                  Place : <input style="border: 1px solid #ced4da;border-radius: 0.2rem;" type="text" id="place" name="place">
                </div>
              </div>
            </div>-->
            {% comment %} <div class="form-row m-1 mb-3">
                    <!-- <label for="jobs-filter">Jobs</label> -->
                    <select class="form-control col-3" name="jobs-filter" id="jobs-filter">
                        <option value=" ">All Jobs</option>
                    </select>
                    <div class="col-2 ml-3">
                        <!-- <label for="search">Search</label> -->
                        <input style="outline: none; border: none; border-bottom: 1px solid grey; width: 90%; padding: .375rem .75rem; margin-right: -30px" type="text" name="search" id="search" placeholder="Candidate Name">
                        <i class="fas fa-search"></i>
                    </div>
                    <!-- <label for="status-filter">Filter</label> -->
                    <select class="form-control col-2" name="status-filter" id="status-filter">
                        <option value=" " hidden>Filter by Status</option>
                        <option id="list-all" value=" ">All</option>
                        <option id="list-acc" value="ACCEPTED">Accepted</option>
                        <option id="list-rej" value="REJECTED">Rejected</option>
                        <option id="list-pend" value="PENDING">Pending</option>
                        <option id="list-ne" value="not-evaluated">Not Evaluated</option>
                        <!-- <option id="list-app" value="applied">Applied</option>
                        <option id="list-inv" value="INVITED">Invited</option> -->
                    </select>
                    <!-- <div class="input-group col ml-3">
                        <div class="input-group-prepend">
                            <div class="input-group-text">Sort by scores</div>
                        </div>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-outline-secondary" style="width: 50px">
                                <input type="radio" name="sort" id="option1" autocomplete="off"><img style="height: 100%" src="{% static 'recruiter/image/resume.svg' %}">
                            </label>
                            <label class="btn btn-outline-secondary" style="width: 50px">
                                <input type="radio" name="sort" id="option2" autocomplete="off"><img style="height: 100%" src="{% static 'recruiter/image/video-camera.svg' %}">
                            </label>
                            <label class="btn btn-outline-secondary" style="width: 50px">
                                <input type="radio" name="sort" id="option3" autocomplete="off"><img style="height: 100%" src="{% static 'recruiter/image/award.svg' %}">
                            </label>
                        </div>
                    </div> -->
                    <!-- <label for="sort-by">Sort by:</label> -->
                    <select class="form-control col-2 ml-3" name="sort-by" id="sort-by">
                        <option value=" " disabled selected hidden>Sort by .</option>
                        <option value="name">Name</option>
                        <option value="date">Date</option>
                        <option value="score">Score</option>
                    </select>
                </div>
            <div class="input-group ml-1 mr-3 mb-3" style="float: left; width: auto">
                <div class="input-group-prepend">
                    <div class="input-group-text form-control"><input class="checkbox" id="selectall" name="selectall"
                                                         type="checkbox"><div id="selectedno" style="margin-left: 3px"></div></div>
                </div>
                <button class="btn" style="background-color: lightgrey" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-caret-down"></i></button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" id="select-all">All</a>
                    <a class="dropdown-item" id="select-none">None</a>
                </div>
                <select class="form-control" id="actions" name="actions">
                    <option value="" disabled selected hidden>Select</option>
                    <option>Send Email</option>
                    <option>Accept</option>
                    <option>Reject</option>
                    <option>Remove</option>
                </select>
            </div> {% endcomment %}

            <table class="table" id="jobsTable">
                <thead  style="background-color: rgb(249, 249, 255); font-size: 1.15rem;">
                
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 0px">Profile</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Post</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Location</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Status</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Openness</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Conscientious</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Extraversion</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Agreeable</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Neuroticism</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Avg. Subject Skill score</th>
                <th class="text-center" style="border: 1px solid #ececec; border-width: 0px 1px 0px 1px">Hire/Reject</th>

                </thead>
                <tbody>
                
                {% for job_app in job_apps%}
                        
                <tr class="text-center tr-{{job_app.app_dict.status}}">
                   
                    <td class="text-left cursor-pointer align-middle" onclick="viewInterview('{{job_app.job_info.id}}','{{job_app.cand_profile.cand_id}}')">
                        {% if job_app.cand_profile %}
                        <img class="rounded-circle" src="{{ job_app.cand_profile.profile_picture }}"
                             style="width: 50px; height: 50px"/>
                        <b class="cand_name">
                            {{job_app.cand_profile.name}}</b>
                        {% else %}
                        <img class="rounded-circle"
                             src="data:image/jpeg;base64,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"
                             style="width: 50px; height: 50px"/>
                        <b>{{job_app.app_dict.candidate_name}}</b>
                        {% endif%}

                    </td>
                    <td class="align-middle font-weight-bold">
                        {{job_app.job_info.post}}
                    </td>
                    <td class="align-middle">
                        {{job_app.job_info.place}}
                    </td>
                    {% if job_app.cand_profile %}
                    <td class="align-middle">
                            {% if job_app.app_dict.status == "ACCEPTED" %}
                            <button class="btn btn-success">
                            {% elif job_app.app_dict.status == "PENDING" %}
                            <button class="btn btn-basic">
                            {% elif job_app.app_dict.status == "REJECTED" %}
                            <button class="btn btn-danger">
                            {% elif job_app.app_dict.status == "INVITED" %}
                                <button class="btn btn-warning">
                            {% elif job_app.app_dict.status == "APPLIED" %}
                                <button class="btn btn-secondary">
                            {% endif %}
                                {{job_app.app_dict.status}}</button>
                        </td>
                    <!-- <td style="max-width: 50px; max-height: 50px">
                      {% include "recruiter/radarchart.html" %}
                    </td> -->
                    <td class="align-middle" >
                            <div class="d-inline-block cursor-pointer" data-placement="bottom" data-toggle="tooltip" title="Openness">
                                <!-- <img style="height: 2.5em" src="{% static 'recruiter/image/resume.svg' %}"> -->
                                <div style="border: 2px solid blue; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                  {{job_app.soft_skill_avg.0}}
                                </div>
                        
                                <div style="font-size: 0.7em;"><b>Openness</b></div>
                            </div>
                        </td>
                        <td class="align-middle" >
                                <div class="d-inline-block cursor-pointer" data-placement="bottom" data-toggle="tooltip" title="Conscientious">
                                    <!-- <img style="height: 2.5em" src="{% static 'recruiter/image/resume.svg' %}"> -->
                                    <div style="border: 2px solid blue; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                    {{job_app.soft_skill_avg.1}}
                                    </div>
                            
                                    <div style="font-size: 0.7em;"><b>Conscientious</b></div>
                                </div>
                            </td>
                            <td class="align-middle" >
                                    <div class="d-inline-block cursor-pointer" data-placement="bottom" data-toggle="tooltip" title="Extraversion">
                                        <!-- <img style="height: 2.5em" src="{% static 'recruiter/image/resume.svg' %}"> -->
                                        <div style="border: 2px solid blue; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                        {{job_app.soft_skill_avg.2}}
                                        </div>
                                
                                        <div style="font-size: 0.7em;"><b>Extraversion</b></div>
                                    </div>
                                </td>  
                                <td class="align-middle" >
                                        <div class="d-inline-block cursor-pointer" data-placement="bottom" data-toggle="tooltip" title="Agreeable">
                                            <!-- <img style="height: 2.5em" src="{% static 'recruiter/image/resume.svg' %}"> -->
                                            <div style="border: 2px solid blue; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                            {{job_app.soft_skill_avg.3}}
                                            </div>
                                    
                                            <div style="font-size: 0.7em;"><b>Agreeable</b></div>
                                        </div>
                                    </td>  
                                    <td class="align-middle" >
                                            <div class="d-inline-block cursor-pointer" data-placement="bottom" data-toggle="tooltip" title="Neuroticism">
                                                <!-- <img style="height: 2.5em" src="{% static 'recruiter/image/resume.svg' %}"> -->
                                                <div style="border: 2px solid blue; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                                {{job_app.soft_skill_avg.4}}
                                                </div>
                                        
                                                <div style="font-size: 0.7em;"><b>Neuroticism</b></div>
                                            </div>
                                        </td>                                               
                        <td class="align-middle">
                            <div class="d-inline-block" data-placement="bottom" data-toggle="tooltip" title="Avg. Subject Skill Score">
                                
                                <div style="border: 2px solid blue; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                        {{job_app.subject_skill_avg}}
                                </div>
                                <div style="font-size: 0.7em;"><b>Avg. Subject<br>Skill Score</b></div>
                            </div>
                        </td>
                        {% comment %} <td class="align-middle">
                            {% if job_app.app_dict.video_resume_score %}
                            {% if job_app.app_dict.video_resume_score == 0 %}
                            <!-- class .not-evaluated is only for counting -->
                            <div class="d-inline-block not-evaluated" data-placement="bottom" data-toggle="tooltip" title="Subject Skill Score">
                                <!-- <img style="height: 2.5em;" src="{% static 'recruiter/image/award.svg' %}"> -->
                                <div style="border: 2px solid grey; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                    {% if job_app.video_interview_score == None %}
                                        0
                                    {% elif job_app.video_interview_score == False %}
                                        NA
                                    {% else %}
                                        {{job_app.video_interview_score}}
                                    {% endif %}
                                </div>
                                <div class="cursor-pointer" onclick="viewInterview('{{job_app.job_info.id}}','{{job_app.cand_profile.cand_id}}')" style="font-size: 0.7em;">Subject<br>Skill Score</div>
                            </div>
                            {% else %}
                            <div class="d-inline-block" data-placement="bottom" data-toggle="tooltip" title="Subject Skill Score">
                                <!-- <img style="height: 2.5em;" src="{% static 'recruiter/image/award.svg' %}"> -->
                                <div style="border: 2px solid grey; border-radius: 50%;width: 2.6em;line-height: 2.5em;">
                                        {{job_app.app_dict.video_resume_score}}
                                </div>
                                <div class="cursor-pointer" onclick="viewInterview('{{job_app.job_info.id}}','{{job_app.cand_profile.cand_id}}')" style="font-size: 0.7em;">Subject<br>Skill Score</div>
                            </div>
                            {% endif %}
                            {% else %}
                            {% endif %}
                        </td> {% endcomment %}

                    <td class="align-middle position-relative" width="15%">
                        <li class="list-unstyled text-center" style="color:#34495e;font-weight: bold">
                            {% if job_app.app_dict.status == "ACCEPTED" %}
                            <div class="d-none">ACCEPTED</div>
                            <i class="fas fa-check"></i>
                            {% endif%}
                            {% if job_app.app_dict.status == "REJECTED" %}
                            <div class="d-none">REJECTED</div>
                            <i class="fas fa-times-circle"></i>
                            {% endif%}
                        </li>
                        {% if job_app.app_dict.status == "APPLIED" %}
                        <li class="list-unstyled">
                                <div class="justify-content-around row">
                                    <button class="btn btn-outline-success col-5" data-target="#acceptModal{{job_app.appid}}"
                                            data-toggle="modal" type="button">HIRE</button>
                                    <button class="btn btn-outline-danger col-6" data-target="#rejectModal{{job_app.appid}}"
                                            data-toggle="modal" type="button">REJECT</button>
                                </div>
                        </li>
                        {% endif %}
                    </td>
                    {% else %}
                    <td class="align-middle">
                        {% if job_app.app_dict.status == "ACCEPTED" %}
                        <button class="btn btn-success">
                        {% elif job_app.app_dict.status == "PENDING" %}
                        <button class="btn btn-basic">
                        {% elif job_app.app_dict.status == "REJECTED" %}
                        <button class="btn btn-danger">
                        {% elif job_app.app_dict.status == "INVITED" %}
                            <button class="btn btn-basic">
                        {% elif job_app.app_dict.status == "APPLIED" %}
                            <button class="btn btn-basic">
                        {% endif %}
                            {{job_app.app_dict.status}}</button>
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="align-middle">
                        <button class="btn btn-default">
                            <img src="{% static 'recruiter/image/interview.svg' %}" style="height: 2.5em">
                        </button>
                    </td>
                    
                    <td class="align-middle position-relative" width="15%">
                        <li class="list-unstyled">
                            <li class="list-unstyled">
                                <div class="justify-content-around row">
                                    <button class="btn btn-outline-success col-5" data-target="#acceptModal{{job_app.appid}}"
                                            data-toggle="modal" type="button" disabled>HIRE</button>
                                    <button class="btn btn-outline-danger col-6" data-target="#rejectModal{{job_app.appid}}"
                                            data-toggle="modal" type="button" disabled>REJECT</button>
                                </div>
                        </li>
                        </li>
                    
                    </td>
                    {% endif %}
                </tr>
                <!-- <script>
                    let averagee{{ job_app.appid| slice:'1:'}} = (resume_score{{ job_app.appid| slice:'1:'}} + video_resume_score{{ job_app.appid| slice:'1:'}})/ 2 ;
                
                 $("#averageScore{{ job_app.appid| slice:'1:'}}").text("Average Score : " + averagee{{ job_app.appid| slice:'1:'}});
                
                </script> -->
                
                {% endfor%}
                </tbody>
            </table>
            {% for job_app in job_apps %}
            <!-- Modal 1 -->
            <div aria-hidden="true" aria-labelledby="acceptModelTitle" class="modal fade"
                 id="acceptModal{{job_app.appid}}"
                 role="dialog"
                 tabindex="-1">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="acceptModel">Send Acceptance Email</h5>
                            <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        {% if job_app.cand_profile %}
                        <div class="modal-body">
                            <div>
                                <form action="#" method="POST">
                                    {% csrf_token %}
                                    
                                    <div class="form-group">
                                        <label>Email address</label>
                                        <input class="form-control" id="{{job_app.appid}}h"
                                               placeholder="name@example.com"
                                               readonly type="email"
                                               value="{{job_app.cand_profile.cand_id}}">
                                    </div>
                                    <div class="form-group">
                                        <label>Subject</label>
                                        <input class="form-control" id="subject{{job_app.cand_profile.cand_id}}accept"
                                               placeholder="Subject" required type="text" value="{{ssubject}}">
                                    </div>
                                    <div class="form-group">
                                        <label>Message</label>
                                        <textarea class="form-control"
                                                  id="message{{job_app.cand_profile.cand_id}}accept"
                                                  placeholder="Message" required rows="8">{{smessage}}</textarea>
                                    </div>
                                    
                                    <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                                    <button class="btn btn-customblue float-right"
                                            onClick="hireMail('{{job_app.cand_profile.cand_id}}',
                                            '{{job_app.cand_profile.name}}','{{job_app.job_info.post}}',
                                            '{{job_app.job_info.id}}','{{job_app.cand_profile.cand_id}}')"
                                            type="submit">
                                        Send Email
<!--                                        {{job_app.cand_profile.cand_id}},-->
<!--                                        {{job_app.cand_profile.name}},-->
<!--                                        {{job_app.job_info.post}},-->
<!--                                        {{job_app.job_info.id}},-->
<!--                                        {{job_app.cand_profile.cand_id}}-->
                                    
                                    </button>
                                </form>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div aria-hidden="true" aria-labelledby="rejectModelTitle" class="modal fade"
                 id="rejectModal{{job_app.appid}}"
                 role="dialog"
                 tabindex="-1">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="rejectModel">Send Rejection Email</h5>
                            <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div>
                                <form action="#" method="POST">
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <label>Email address</label>
                                        <input class="form-control" id="{{job_app.appid}}r"
                                               placeholder="name@example.com"
                                               readonly type="email"
                                               value="{{job_app.cand_profile.cand_id}}">
                                    </div>
                                    <div class="form-group">
                                        <label>Subject</label>
                                        <input class="form-control" id="subject{{job_app.cand_profile.cand_id}}rej"
                                               placeholder="Subject" required type="text" value="{{rsubject}}">
                                    </div>
                                    <div class="form-group">
                                        <label>Message</label>
                                        <textarea class="form-control" id="message{{job_app.cand_profile.cand_id}}rej"
                                                  placeholder="Message" required rows="8">{{rmessage}}</textarea>
                                    </div>
                                    <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                                    <button class="btn btn-customblue float-right"
                                            onClick="rejMail('{{job_app.cand_profile.cand_id}}','{{job_app.cand_profile.cand_id}}','{{job_app.job_info.post}}','{{job_app.job_info.id}}','{{job_app.cand_profile.cand_id}}')"
                                            type="submit">
                                        Send Email
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<script>

  /* Custom filtering function which will search data in column four between two values */



  $(document).ready(function () {
        var jobTable = $('#jobsTable').DataTable();

        function unique(list) {
            var result = [];
            $.each(list, function(i, e) {
                if ($.inArray(e, result) == -1) result.push(e);
            });
            return result;
        }
        function count(l, k){
            var result = [];
            for(var i=0;i<k.length;i++){
                    result[i]=0;
                    for(var j=0;j<l.length;j++){
                        if (k[i]==l[j]){
                                result[i]+=1;
                        }
                    }
                }
                return (result);
        }

        updatejobs();
        function updatejobs(){
            a = jobTable.column(2).data().toArray();
            b = unique(a);
            c = count(a, b);
            s_index = $('#jobs-filter').prop('selectedIndex');
            $('#jobs-filter').html(`<option value=" "> 
                                        All Jobs (${a.length}) 
                                    </option>`);
            $.each(b, function( index, value ) {
                $('#jobs-filter').append(`<option value="${value}"> 
                                            ${value} (${c[index]})
                                        </option>`)
            });
            $('#jobs-filter').prop('selectedIndex', s_index);
    }

    
    // document.j = jobTable;
    // $('#sort-by').click(function (){
    //     if ($(this).val() == 'name'){
    //         jobTable.column(1).data().sort().draw();
    //     } 
    // });

    function refreshdd(){
        $('#list-all').text("All ("+ ($('tr').length-1) +")");
        $('#list-acc').text("Hired ("+ $('.tr-ACCEPTED').length +")");
        $('#list-rej').text("Rejected ("+ $('.tr-REJECTED').length +")");
        $('#list-pend').text("Pending ("+ $('.tr-PENDING').length +")");
        // $('#list-ints').text("Interview Scheduled ("+ $('.tr-INTERVIEW').length +")");
    }
    refreshdd();
    // $('#list-ne').append(" ("+ $('.not-evaluated').length +")");
  });



</script>
<script>
    //refresh logic

    if (window.history.replaceState) {
      window.history.replaceState(null, null, window.location.href);
    }
    //Main ajax logic for hire/reject
    function getCookie(name) {
      var cookieValue = null;
      if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
          var cookie = jQuery.trim(cookies[i]);
          // Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) == (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }
    var csrftoken = getCookie('csrftoken');
    function csrfSafeMethod(method) {
      // these HTTP methods do not require CSRF protection
      return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }
    function sameOrigin(url) {
      // test that a given url is a same-origin URL
      // url could be relative or scheme relative or absolute
      var host = document.location.host; // host + port
      var protocol = document.location.protocol;
      var sr_origin = '//' + host;
      var origin = protocol + sr_origin;
      // Allow absolute or scheme relative URLs to same origin
      return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
    }
    function hireMail(c_email,c_name,c_post,jid,candidate_id) {

      $.ajaxSetup({
        beforeSend: function (xhr, settings) {
          if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
            // Send the token to same-origin, relative URLs only.
            // Send the token only if the method warrants CSRF protection
            // Using the CSRFToken value acquired earlier
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
          }
        }
      });
      data = {
        'c_email':c_email,
        'c_name':c_name,
        'c_post':c_post,
        'c_sub':document.getElementById('subject'+c_email+'accept').value,
        'c_messg':document.getElementById('message'+c_email+'accept').value,
        'jid' : jid,
        'candidate_id' : candidate_id
      }
      $.ajax({
        url: 'hiremail',
        type: 'POST',
        dataType: "json",
        data: data,
        success: function (data) {
            console.log("reached here");
         window.location.reload();
        }

      });
    }
    function rejMail(c_email,c_name,c_post,jid,candidate_id) {

      $.ajaxSetup({
        beforeSend: function (xhr, settings) {
          if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
            // Send the token to same-origin, relative URLs only.
            // Send the token only if the method warrants CSRF protection
            // Using the CSRFToken value acquired earlier
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
          }
        }
      });
      data = {
        'c_email':c_email,
        'c_name':c_name,
        'c_post':c_post,
        'c_sub':document.getElementById('subject'+c_email+'rej').value,
        'c_messg':document.getElementById('message'+c_email+'rej').value,
        'jid' : jid,
        'candidate_id' : candidate_id
      }
      $.ajax({
        url: 'rejmail',
        type: 'POST',
        dataType: "json",
        data: data,
        success: function (data) {
          window.location.reload();
        }

      });
    }

    function viewInterview(jid,candidate_id) {
        currentUrl = window.location.href;
        // window.location.href = "/";
        currentUrlArray = currentUrl.split('/');
        currentUrlArray.pop();
        newUrl = currentUrlArray.join('/')
        window.location.href = newUrl + '/view_interview/' + jid.trim() +  '/'+ candidate_id.trim();
    }

  


</script>
{% endblock content %}
